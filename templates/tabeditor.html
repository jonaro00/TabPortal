{% extends "tabviewer.html" %}
{% block menu %}
  {% if !readonly %}
    <div class="tp-help">
      <div class="tp-help-title">Editor: How to use</div>
      Write <a href="https://www.alphatab.net/docs/alphaTex/introduction/" target="_blank">alphaTex</a> notation in the text editor
      and press <b>Ctrl+Enter</b> to render it. Press <b>Enter</b> to re-focus on the editor.
    </div>
  {% endif %}
  <div class="tp-help">
    <div class="tp-help-title">Player: How to use</div>
    Press <b>Space</b> to Play/Pause.
    <b>M</b> to mute.
    <b>Backspace</b> to reset.
  </div>
  {% if !readonly %}
    <div class="tp-help">
      <div class="tp-help-title">BPM counter</div>
      <button id="tp-bpm-btn">Click</button>
      <span id="tp-bpm-result"></span>
    </div>
  {% endif %}
{% endblock %}
{% block content %}
  <div class="tp-editor-container">
    <div class="tp-editor {% if readonly %} hidden {% endif %}">
      <textarea id="tp-text-editor" spellcheck="false" {% if readonly %} readonly {% endif %}>{{ alpha_tex }}</textarea>
      <div class="tp-editor-menu">
        {% if readonly %}
          <a class="btn" id="tp-edit">
            <i class="fas fa-edit"></i>
            <br>Edit
          </a>
          <h3>{{ name }}</h3>
        {% else %}
          <a class="btn" id="tp-render">
            <i class="fas fa-file-download"></i>
            <br>Render
          </a>
          <a class="btn disabled" id="tp-save">
            <i class="fas fa-save"></i>
            <br>Save
          </a>
          <a class="btn disabled" id="tp-save-new">
            <i class="fas fa-save"></i>
            <br>Save As
          </a>
          <div>API Password: <input id="tp-api-password" type="password"></div>
          <div>Name: <input id="tp-name" type="text" value="{{ name }}"></div>
        {% endif %}
      </div>
    </div>
    <div class="tp-editor-bar">
      {% if readonly %}
        <i class="fas fa-chevron-down"></i>
        Source
        <i class="fas fa-chevron-down"></i>
      {% else %}
        <i class="fas fa-chevron-up"></i>
        Editor
        <i class="fas fa-chevron-up"></i>
      {% endif %}
    </div>
    <div class="tp-viewer">
      {% call super() %}
    </div>
  </div>
  <script src="/static/tabEditor.js"></script>
{% endblock %}
